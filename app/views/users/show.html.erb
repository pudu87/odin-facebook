<h2><%= "#{@user.full_name}'s page" %></h2>

<h3>Profile information</h3>
<div>
  <% if @profile.photo.attached? %>
    <%= image_tag @profile.photo, width: "75" %>
  <% end %>
  <ul>
    <li>Birth date: <%= @profile.birthdate %></li>
    <li>Gender: <%= @profile.sex %></li>
    <li>Location: <%= @profile.location %></li>
  </ul>
  <% if current_user == @user %>
    <%= link_to ">>Edit profile", [:edit, @user, @profile] %>
  <% end %>
</div>

<h3>Posts</h3>
<%= link_to ">>New", new_post_path %>
<ul>
  <% @user.posts.each do |post| %>
    <li>
      <% if post.photo.attached? %>
        <%= image_tag post.photo, width: "150" %>
        <br>
      <% end %>
      <% if post.content %>
        <%= post.content %>
      <% end %>
      <br>
      <%= render partial: 'posts/like', locals: {post: post} %>
      <% if current_user == @user %>
        <%= link_to ">>Edit", edit_post_path(post) %>
        <%= link_to ">>Delete", post_path(post), method: :delete, data: {confirm: "Remove this post?"} %>
      <% end %>
      <h3>Comments</h3>
      <%= render partial: 'posts/comment', collection: post.comments %>
      <%= render partial: 'comments/form', locals: {post: post}%>
    </li>
  <% end %>
</ul>

<%= link_to ">>Back to Timeline", root_path %>
<%= link_to ">>Back to Users Index", users_path %>